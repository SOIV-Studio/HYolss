# 대시보드 및 기능 구현 계획

## 0. 버전관리 및 작성에 관련하여

- 아레 계획은 추후 적용하게 될 4.0.0과 5.0.0 버전의 계획 및 준비 작업입니다.
- 4.0.0은 봇에게 대시보드를 적용하기 전의 버전
- 5.0.0은 봇에게 대시보드를 적용한 후의 버전
- 모든 버전이 적용되고 안정화 페치 및 그외 기타 업데이트에 관한 버전은 5.5.0 ~ 6.0.0 버전으로 적용한다.

## 1. 웹사이트 구조

### 메인 사이트 구조
- `website.com/` (메인)
- `website.com/portfolio` (작업물)
- `website.com/commission` (커미션)
- `website.com/service/agreement` (이용약관) terms-of-service
- `website.com/service/privacy` (개인정보처리방침) privacy-policy

### 대시보드 구조
- `dashboard.website.com` (봇 대시보드)
  * 디스코드 OAuth2 로그인 사용
  * 봇 관련 기능 전용 대시보드

### 로그인 시스템
1. 메인 사이트
   - SNS 로그인 (구글 등) 지원
   - 일반 회원가입 (수집 및 등록 정보 : *이메일, *닉네임, 생년월일 / *처리는 필수)
   - 관리자 전용 로그인 별도 구현(기본 로그인 시스템에 관리자 계정 등록으로도 갠찬을 듯)

2. 대시보드
   - 디스코드 로그인 전용
   - 관리자는 메인 사이트 크레덴셜로도 접근 가능

### 장단점
- 장점:
  * 각 서비스에 최적화된 인증 방식 사용
  * 서비스별 독립적인 리소스 관리
  * 트래픽 분산 효과
- 단점:
  * 추가 SSL 인증서 필요
  * 서브도메인 DNS 설정 필요
  * 서버 비용 증가 가능성

## 2. 봇 기능 구현

### 서버 입장 시스템
1. 초대자 기반 메시지
```javascript
// DB 구조
{
    inviter_id: String,    // 초대한 유저 ID
    guild_id: String,      // 서버 ID
    invite_date: Date,     // 초대 날짜
    invite_count: Number   // 초대 횟수
}
```

2. 서버 기록 기반 메시지
```javascript
// DB 구조
{
    guild_id: String,          // 서버 ID
    first_join_date: Date,     // 최초 입장 날짜
    last_leave_date: Date,     // 마지막 퇴장 날짜
    join_count: Number,        // 총 입장 횟수
    current_status: Boolean    // 현재 입장 상태
}
```

3. 위의 2가지를 확인하여 하나의 메시지로 전송
- 초대자 기반, 서버 입장 기록 기반으로 서버 입장시 메시지를 전송
- 모든 내용은 EMbed 방식을 사용

3-1. 신규 유저, 신규 서버 / 두가지가 전부 신규일 경우 봇 입장 메시지
```
# HYolss가 유저들에게 인사합니다! (인사 임티)

저를 대리고 와주신 유저님! 처음 뵙겠습니다!
나는 하나의 작은 별과 꿈을 가지고 나아가는 동행자 HYolss 이라고해!
이 서버에 대려와준 (닉네임)님, 대리고 와줘서 고마워!

일단 내가 작동하는 방식에 대해 짧개 알려줄깨!
기본은 슬레시(/)를 사용하고 다른 방식으로는
접두사 방식인 ! or = 으로 호출 및 명령어, 기능 사용이 가능하고
명령어를 사용하면 버튼과 메뉴 선택이라는 기능을 주로 작동되니 이점 알아줘!

명령어를 사용하는데 모르는 점이 있어?
'/help'를 사용하여 각각의 명령어에 대한 설명과 사용법을 확인해 볼 수 있어!

여기는 처음 왔는데 어떤 서버일까? 궁굼하다! 알려줄 동행자는 없나?

[TIP] 기초 작업 시작 명령어인 '/setup'를 사용하여 서버에서 봇을 사용하기 위한 작업을 간편하게 진행을 할 수 있습니다!

[!] 운영중인 HYolss은 테스트 버전 및 경험을 위해 제작 및 활동중인 봇이므로 봇이 종료되거나 버그 및 오류가 발생 할 수 있습니다.
```

3-2. 기존 유저, 기존(중복) 서버 / 두가지가 전부 신규가 아닐 경우 봇 입장 메시지
```
# HYolss가 유저에게 인사합니다! (인사 임티)

저를 대리고 와주신 유저님! 다시 뵙겠습니다!
나는 하나의 작은 별과 꿈을 가지고 나아가는 동행자 HYolss 이라고해!
이 서버에 대려와준 (닉네임)님, 대리고 와줘서 고마워!

날 대리고온 동행자 (닉네임)님! 그리고 날 알고 있는 동행자가 보이네!
그렇다면! 나에 대해 잘 알고 있는 동행자가 있으니 설명을 생략할깨!

물론! 명령어를 사용하는데 모르는 점이 있어?
'/help'를 사용하여 각각의 명령어에 대한 설명과 사용법을 확인해 볼 수 있어!

글고보니 어라 여기는 와본적이 있는 것 같아!
이 서버의 데이터가 복구 가능해! 동행자님 복구 시스템을 시작할까!?

[TIP] 기초 작업 시작 명령어인 '/setup'를 사용하여 서버에서 봇을 사용하기 위한 작업을 간편하게 진행을 할 수 있습니다!

[!] 운영중인 HYolss은 테스트 버전 및 경험을 위해 제작 및 활동중인 봇이므로 봇이 종료되거나 버그 및 오류가 발생 할 수 있습니다.
```

3-3. 신규 유저, 기존(중복) 서버 / 처음 보는 유저, 중복되는 서버인 경우 봇 입장 메시지
```
# HYolss가 유저들에게 인사합니다! (인사 임티)

저를 대리고 와주신 유저님! 처음 뵙겠습니다!
나는 하나의 작은 별과 꿈을 가지고 나아가는 동행자 HYolss 이라고해!
이 서버에 대려와준 (닉네임)님, 대리고 와줘서 고마워!

일단 내가 작동하는 방식에 대해 짧개 알려줄깨!
기본은 슬레시(/)를 사용하고 다른 방식으로는
접두사 방식인 ! or = 으로 호출 및 명령어, 기능 사용이 가능하고
명령어를 사용하면 버튼과 메뉴 선택이라는 기능을 주로 작동되니 이점 알아줘!

명령어를 사용하는데 모르는 점이 있어?
'/help'를 사용하여 각각의 명령어에 대한 설명과 사용법을 확인해 볼 수 있어!

어라 지금 보니 여기는 와본적이 있는 것 같아! 근대 날 초대 해준 동행자는 처음 보는데?...
누가 날 여기에 초대 해준적이 있는 것 같은데 알수가 없어!
하지만 이 서버의 데이터가 복구 가능해! 동행자님 복구 시스템을 시작할까!?

[TIP] 기초 작업 시작 명령어인 '/setup'를 사용하여 서버에서 봇을 사용하기 위한 작업을 간편하게 진행을 할 수 있습니다!

[!] 운영중인 HYolss은 테스트 버전 및 경험을 위해 제작 및 활동중인 봇이므로 봇이 종료되거나 버그 및 오류가 발생 할 수 있습니다.
```

3-1. 기존 유저, 신규 서버 / 기존 유저, 신규 서버일 경우 봇 입장 메시지
```
# HYolss가 유저들에게 인사합니다! (인사 임티)

저를 대리고 와주신 유저님! 다시 뵙겠습니다!
나는 하나의 작은 별과 꿈을 가지고 나아가는 동행자 HYolss 이라고해!
이 서버에 대려와준 (닉네임)님, 대리고 와줘서 고마워!

날 대리고온 동행자 (닉네임)님! 그리고 날 알고 있는 동행자가 보이네!
그렇다면! 나에 대해 잘 알고 있는 동행자가 있으니 설명을 생략할깨!

명령어를 사용하는데 모르는 점이 있어?
'/help'를 사용하여 각각의 명령어에 대한 설명과 사용법을 확인해 볼 수 있어!

여기는 처음 왔는데 어떤 서버일까? 궁굼하다! 알려줄 동행자는 없나?

[TIP] 기초 작업 시작 명령어인 '/setup'를 사용하여 서버에서 봇을 사용하기 위한 작업을 간편하게 진행을 할 수 있습니다!

[!] 운영중인 HYolss은 테스트 버전 및 경험을 위해 제작 및 활동중인 봇이므로 봇이 종료되거나 버그 및 오류가 발생 할 수 있습니다.
```

### 서버 설정 복원 시스템
- 서버 설정 복원 시스템은 Xenon 참고
```javascript
// 서버 설정 DB 구조
{
    guild_id: String,
    settings: {
        command_channels: [채널ID들],
        notification_settings: {
            twitch: { enabled: Boolean, channel_id: String },
            youtube: { enabled: Boolean, channel_id: String }
        },
        auto_roles: [역할ID들],
        welcome_message: {
            enabled: Boolean,
            channel_id: String,
            message: String
        },
        custom_prefix: String,
        permissions: {
            admin_roles: [역할ID들],
            mod_roles: [역할ID들]
        }
    },
    version: Number,
    last_updated: Date
}
```

## 3. 구현 예정 기능

### 대시보드 기능
- 봇 상태 모니터링
- 서버별 설정 관리
- 명령어 사용 통계
- 알림 설정 관리
- 사용자 권한 관리
- [ Premium ]구독 시스템(유료/결제 시스템 구현 필요 / 월, 년, 평생 결제 시스템)
- 밝은, 다크, 기기 테마 모드 (계정 저장/기기 저장?)
- 사이트 언어 (한국어, 영어, 일본어(?))
- random-words-store 폴더내에 있는 목록 확인 페이지

### 봇 기능
- AI 채팅 시스템 (LLM/GPT)
  * API 사용 또는 자체 LLM 사용 계획 필요
  * 단일 AI 채팅 시스템이 아닌 버튜버 뉴로사마(Neurosama)와 같이 성격이 부여된 AI 채팅 시스템
  * AI 채팅 시스템을 제외한 그외 시스템에서도 AI를 사용하는 시스템이 존제하여 섬세한 준비 및 기획, 구현이 필요
- 스트리밍 플랫폼 알림 (플렛폼 우선순번)
  * YouTube (동영상, 라이브(방송), 최초공개, 쇼츠, 게시물(커뮤니티))
  * CHZZK (방송, 게시물(커뮤니티))
  * SOOP (방송, 게시물(커뮤니티))
  * Twitch (방송, 게시물(커뮤니티))
  * KICK (방송, 게시물(커뮤니티))
  * TikTok (동영상 / 또 더 있나?)
- SNS 알림 (동시 구현)
  * Twitter(X)
  * Instagram
  * Bluesky
  * Threads
  * Facebook
  * 그외 여러 SNS
  * 지원 가능 여부 확인 불가능 : NAVER Cafe, Tumblr, Mastodon, Reddit, RSS Feeds, Podcast
- 서버 관리 기능
  * 자동 역할 부여
  * 환영 메시지 설정
  * 명령어 권한 관리
  * AutoMod/서버 활동 규정을 적용하여 자동 제재 기능 (경고 및 제재 시스템)
  * 서버내에서 유저 활동 로그 기능(추가 확인및 기획 필요/뽑을 수 있는 모든 로그는 띄울수 있도록)
  * 서버 입장 캡차인증(뷰봇, 광고계정 걸러내기용)
  * 일부 기능은 Zira, Sapphire, MEE6를 참고하여 추가 기능 제작 및 구현
- 사용자 커스텀 명령어 시스템
  * 간편모드로 MEE6, Sapphire와 같은 커스텀 명령어 제작 방식
  * node.js, CSS으로 직접 명령어 코딩을 하여 작동하는 방식 (고급 사용자용)
- 음악 시스템
  * 지원 플렛폼 : YouTube, Spotify, SoundCloud
  * 시스템 제작 여부는 확정되지 않았습니다.
  * 별계의 봇으로 운영 될 가능성도 있음
- 채널 시스템
  * 통화방 생성기 / 예시는 TempVoice를 참고
- 게임 전적 검색 시스템
  * OP.gg, TRN을 통하여 전적 검색 기능
  * 게임 종류는 해당 전적 시스템에서 지원하는 게임 종류 수만큼
- 서버 관리자 문의 시스템
  * Ticket Tool, ModMail를 참고하여 제작 (사실 참고가 아닐지도..)
- 멤버 카운트 시스템
  * 역할 또는 유저와 봇 갯수에 따라 카운드를 표시하는 시스템
  * 유저와 봇 카운트를 별도로 표시 할 수 있도록 작업 필수
- Emote 시스템 (확정 안됨)
  * BTTV, 7TV와 같은 이모티콘(이모지)를 사용 하거나 서버내에 등록을 할 수 있도록 제작

## 4. 필요한 패키지

### 웹사이트
- express 또는 next.js (웹 프레임워크)
- ejs 또는 react (프론트엔드)
- passport (인증)
- express-session (세션 관리)
- mongoose 또는 sqlite3 (데이터베이스)

### 봇 대시보드
- discord.js (디스코드 API)
- passport-discord (디스코드 OAuth2)
- express-session
- 데이터베이스 패키지

## 5. 호스팅 고려사항

### 서버 요구사항
- Node.js 실행 환경
- 24/7 안정적 가동
- SSL 인증서
- 최소 1GB RAM (권장 2GB 이상)
- 데이터베이스 지원

### 추천 호스팅 서비스
- AWS
- Google Cloud
- DigitalOcean
- Heroku
- Vercel (프론트엔드)
- MongoDB Atlas (데이터베이스)

### 필수 설정
- 환경 변수 관리
- 도메인 및 DNS 설정
- 백업 시스템
- 모니터링 도구

## 6. 개발 및 배포 프로세스

### Git 브랜치 전략
```
main (또는 master) ← 메인 버전
   ↑
development ← 개발 버전
   ↑
feature/* ← 새로운 기능 개발
```

### 환경 설정 분리
```
config/
  ├── config.main.json    # 메인 서버 설정
  ├── config.dev.json     # 개발 서버 설정
  └── config.local.json   # 로컬 테스트 설정
```

### 배포 구조
1. 코드 관리 (GitHub/GitLab)
```
Repository
├── main 브랜치 → 실제 서비스
└── development 브랜치 → 개발/테스트
```

2. 웹사이트 배포 (Cloudflare)
- 메인 사이트: `website.com`
  * main 브랜치에서 자동 배포
  * 프로덕션 환경 설정 사용
- 개발 버전: `dev.website.com`
  * development 브랜치에서 자동 배포
  * 개발 환경 설정 사용

3. 디스코드 봇 배포
- 메인 봇:
  * 호스팅 업체에서 24/7 구동
  * main 브랜치 기반 배포
  * 실제 서비스용 토큰 사용
- 개발용 봇:
  * 별도 호스팅 또는 로컬 실행
  * development 브랜치 기반
  * 테스트용 토큰 사용

## 7. 테스트 환경 구성

### 로컬 테스트 환경
```
개발 PC ─→ 로컬 봇 ─→ 테스트 서버
      └─→ 로컬 웹사이트
```

### 호스팅 테스트 환경
```
호스팅 서버 ─→ 개발용 봇 ─→ 테스트 서버
          └─→ dev.website.com
```

## 8. 추가 고려사항

### UI/UX 개발 프로세스
1. 디자인 준비
   - UI 디자인 파일 작성
   - 필요한 이미지 에셋 준비
   - 컴포넌트 구조 설계

2. 구현 단계
   - 컴포넌트별 개발
   - 반응형 디자인 적용
   - 접근성 고려

3. 테스트
   - 크로스 브라우저 테스트
   - 모바일 환경 테스트
   - 사용성 테스트

### 보안 고려사항
- HTTPS 필수 적용
- API 엔드포인트 보안
- 토큰 관리
- 권한 관리
- DDoS 방어 (Cloudflare 활용)

### 성능 최적화
- 이미지 최적화
- 캐싱 전략
- CDN 활용
- 데이터베이스 인덱싱
- 로드 밸런싱 고려

### 모니터링 및 로깅
- 서버 상태 모니터링 (Atlassian 활용)
- 에러 로깅
- 사용자 행동 분석
- 성능 메트릭 수집

### 백업 전략
- 데이터베이스 정기 백업
- 설정 파일 백업
- 복구 절차 문서화

### 확장성 고려
- 마이크로서비스 아키텍처 고려
- 컨테이너화 가능성
- 서버리스 구조 검토
- 봇 활동량에 따른 서버 샤드 작업화 및 샤드 그룹화(클러스터)
- Custom branded bots에 대한 별도 서버 준비 작업 및 대응 [Premium 시스템에 포함됨]

### 약관 및 정책
- 안전한 운영 및 필요한 약관 및 정책에 대한 내용 작성 필수 (언어에 따른 한국어, 영어 작성 필요)
- 서비스 약관 : terms-of-service
- 개인정보 보호정책 : privacy-policy

### 봇 캐릭터 작업 필요
- 신규 자체 캐릭터 및 설정 작업 필요
- 캐릭터 설정표 일러스트 및 프로필 이미지, 배너 이미지 작업 필요
- 이에 따른 전용 이모티콘(이모지) 작업 필요(갯수는 상황 봐서)

### 디스코드 Support 서버 및 커뮤니티 서버 관련
- 기존에 조용하게 준비중이였던 Kileu NETWORK의 커뮤니티 및 기획안의 작업 관련 계획 세부화(?)
- SOIV Studio Support에서 봇에 대한 문제 및 QnA, 봇 공식 커뮤니티 서버 운영
- 그외 관련된 기획안 및 준비 단계의 작업들을 계획 세부화 또는 철회 작업