## 1. 웹사이트 구조

- 도메인 : [호스팅케이알(hosting.kr)](https://www.hosting.kr/)
- DNS, DDoS, Workers 및 Pages, CDN : [클라우드플레어(cloudflare)](https://www.cloudflare.com/)
- 서버 : [AWS](https://aws.amazon.com/)
  * GCP / Raspberry Pi / N100 / 
- DB : [Supabase](https://supabase.com/) + [MongoDB Atlas](https://www.mongodb.com/)
- 이메일
  * 메인 : biz@soiv-studio.xyz
    - 기본 모든 메일을 받는 메일 주소 / 문의, 광고, ETC
  * 서브 : help@soiv-studio.xyz
    - 웹페이지 또는 기타 서비스에서 별도로 도움이 필요할때 사용되거나 메인 메일이 작동 불능일때 사용하는 메일일
  * 자동메일 : noreply@soiv-studio.xyz
    - 인증코드, 회원가입, 회원탈퇴 등등

### 메인 사이트 구조
- `soiv-studio.xyz/` (메인)
- `soiv-studio.xyz/portfolio` (작업물)
- `soiv-studio.xyz/commission` (커미션)
- `soiv-studio.xyz/(discordbotname)-bot` (디스코드 봇 메인 페이지)

- `soiv-studio.xyz/account/dashboard` (웹사이트 대시보드)
- `soiv-studio.xyz/account` (어카운트 페이지)
- `soiv-studio.xyz/developer` (개발자 페이지/고급모드)
  * Main / statuspage / URL shortener / 이외 관련된 서비스등

- `soiv-studio.xyz/service/terms-of-service` (이용약관) terms-of-service
  * 또는 `soiv-studio.xyz/terms-of-service`
- `soiv-studio.xyz/service/privacy-policy` (개인정보처리방침) privacy-policy
  * 또는 `soiv-studio.xyz/privacy-policy`

### statuspage
- 사용중인 오픈소스 : [upptime](https://github.com/upptime/upptime)
- `status.soiv-studio.xyz` (statuspage)
- `status.soiv-studio.xyz/dashboard` (statuspage Dashboard)
  * `soiv-studio.xyz/developer`에 통합 예정
    - ex : `soiv-studio.xyz/developer/statuspage`

### URL shortener
- URL shortener/QR Code
  - 오픈소스 : [Shlink](https://github.com/shlinkio/shlink) / [kutt](https://github.com/thedevs-network/kutt)
- `site.soiv-studio.xyz` (URL shortener/링크단축)
- `site.soiv-studio.xyz/dashboard` (URL shortener Dashboard)
  * `soiv-studio.xyz/developer`에 통합 예정
    - ex : `soiv-studio.xyz/developer/site`
- `site.soiv-studio.xyz/movement/**` (URL shortener 링크)
  * 또는 `site.soiv-studio.xyz/**`으로 예정

### Bot 메인 페이지 및 대시보드 구조
- `(botname)-bot.soiv-studio.xyz` (디스코드 봇 메인 페이지)
- `dashboard.soiv-studio.xyz` (봇 대시보드)
  * 디스코드 OAuth2 로그인 사용
  * 봇 관련 기능 전용 대시보드
  * SOIV_Studio-Project_BOT 에서 제작된 모든 디스코드 봇을 관리가 가능한 대시보드
- `dashboard.soiv-studio.xyz/(serverid)/home` (home)
- `dashboard.soiv-studio.xyz/(serverid)/**` (기능)
  * `dashboard.website.com/(serverid)/general-settings`
  * `dashboard.website.com/(serverid)/commands`
  * `dashboard.website.com/(serverid)/auto-moderation`
  * `dashboard.website.com/(serverid)/moderation`
  * `dashboard.website.com/(serverid)/social-notifications`
  * `dashboard.website.com/(serverid)/join-roles`
  * `dashboard.website.com/(serverid)/reaction-roles`
  * `dashboard.website.com/(serverid)/welcome-messages`
  * `dashboard.website.com/(serverid)/role-connections`
  * `dashboard.website.com/(serverid)/logging`
  * `dashboard.website.com/(serverid)/utility`
  * `dashboard.website.com/(serverid)/Music`
  * `dashboard.website.com/(serverid)/translate`
- `dashboard.soiv-studio.xyz/(serverid)/Premium` (Premium)
  * `dashboard.soiv-studio.xyz/(serverid)/Premium/buy` (Premium - buy)
  * `dashboard.soiv-studio.xyz/(serverid)/Premium/settings` (Premium - settings)
- `dashboard.soiv-studio.xyz/(serverid)/new` (실험실/얼리 엑세스)
- `dashboard.soiv-studio.xyz/developer` (개발자 대시보드)
  * `dashboard.soiv-studio.xyz/developer/(serverid)`
  * 봇 서버에 대한 서버 상태(PM2)
- `dashboard.soiv-studio.xyz/archive/(userid)` (캐릭터 아카이브)
  * 카드
  * 대화/대사
  * 업적
  * 키즈나 랭크(인연 랭크)

### SOIV Studio Docs
- `docs.soiv-studio.xyz` (Discord Bot Docs - HYolss / gitbook)
  * 기본적으로 한국어를 지원, 영어도 동시 지원을 하나 한국어 만큼 업데이트가 빠르지 않음
    - 오픈소스를 해둘 예정이지만 모든 기능을 오픈하지는 않을 예정
    - 정식 라이브 서비스 이후 오픈소스 전용 레포를 제작하고 기존 레포는 비공개 처리 될 예정
  * 이 docs는 서비스중인 디스코드 봇에 관련된 내용만 작성되는 문서입니다.
    - 그외 다른 서비스에서 필요할 경우 별도 docs를 제작할 예정 
- `docs.soiv-studio.xyz/user` (Discord Bot Docs User :: 유저 도움말)
- `docs.soiv-studio.xyz/api` (Discord Bot Docs API :: API 문서화)
- `docs.soiv-studio.xyz/developer` (Discord Bot Docs developer guidelines :: 개발자 가이드라인(기술 문서))
- `docs.soiv-studio.xyz/community-guidelines` (Discord Bot Docs community contribute guidelines :: 커뮤니티 기여 가이드라인)

### 로그인 시스템
1. 메인 사이트
    - SNS 로그인 (구글, 네이버, 카카오, 애플 등) 지원
    - 일반 회원가입
        * (수집 및 등록 정보 : *이메일, *닉네임, 생년월일 / *처리는 필수 작성)
    - 관리자 전용 로그인 별도 구현(기본 로그인 시스템에 관리자 계정 등록으로도 갠찬을 듯)

2. 대시보드
    - 디스코드 로그인 전용
    - 관리자는 메인 사이트 크레덴셜로도 접근 가능

### 장단점
- 장점:
    * 각 서비스에 최적화된 인증 방식 사용
    * 서비스별 독립적인 리소스 관리
    * 트래픽 분산 효과
- 단점:
    * 추가 SSL 인증서 필요
    * 서브도메인 DNS 설정 필요
    * 서버 비용 증가 가능성

### 회원 정보
- 닉네임
- 이메일
  * 이메일 인증
- 생년월일
- 언어
- SNS 연동
  - 구글, 네이버, 카카오, 애플, 인스타, 트위터, 디스코드

## 2. 웹사이트 및 대시보드 기능 구현

### 대시보드 기능
- 봇 상태 모니터링([statuspage](https://www.atlassian.com/ko/software/statuspage))
- 서버별 설정 관리
- 명령어 사용 통계
- 알림 설정 관리
- 사용자 권한 관리
- [ Premium ]구독 시스템(유료/결제 시스템 구현 필요 / 월, 년, 평생 결제 시스템)
- 밝은, 다크, 기기 테마 모드 (계정 저장/기기 저장?)
- 사이트 언어 (한국어, 영어, 일본어(?))
- random-words-store 폴더내에 있는 단어 목록 확인 페이지

### UI/UX 개발 프로세스
1. 디자인 준비
  - UI 디자인 파일 작성
  - 필요한 이미지 에셋 준비
  - 컴포넌트 구조 설계
  - Figma UI/UX
    * PC, Mobile 전용 UI/UX
    * PC 버전의 UI/UX를 우선

2. 구현 단계
  - 컴포넌트별 개발
  - 반응형 디자인 적용
  - 접근성 고려

3. 테스트
  - 자동화된 테스트
    * 단위 테스트 (Jest/Mocha)
    * 통합 테스트 (SuperTest)
    * E2E 테스트 (Cypress/Playwright)
  - 크로스 브라우저 테스트
    * 주요 브라우저 호환성 검증
    * 반응형 디자인 테스트
  - 모바일 환경 테스트
    * 다양한 디바이스 해상도 테스트
    * 터치 인터랙션 테스트
  - 사용성 테스트
    * 사용자 시나리오 기반 테스트
    * A/B 테스트
  - 성능 테스트
    * 부하 테스트 (k6/Artillery)
    * 스트레스 테스트
    * 메모리 누수 테스트
  - 보안 테스트
    * 취약점 스캔
    * 침투 테스트
  - 장애 복구 테스트
    * 장애 주입 테스트
    * 백업/복구 프로세스 검증

4. 국제화(i18n)
  - 다국어 지원
    * 커뮤니티 기반 번역 시스템
      - Crowdin/Transifex/Lokalise 등의 플랫폼 활용
      - 커뮤니티 번역가 보상 시스템
      - 번역 품질 검수 프로세스
      - 번역 진행률 대시보드
      - 개발자에서 정식 지원하는 언어는 기본 3개
        * default locales : en-US, ja-JP, ko-KR
        * default locales를 제외한 모든 언어는 정식 지원하는 언어가 아님
    * 번역 관리 시스템 구축
      - 번역 키 체계 설계
      - 누락된 번역 자동 감지
        * 변역 되지 않은 부분은 영어로 표시
        * 한국어는 default 언어이기에 제외
      - 번역 버전 관리
      - 번역 메모리(TM) 구축
    * 동적 언어 전환
      - 실시간 언어 변경
        * 언어 표시는 사용자가 지정하여 변경 가능
      - 언어별 폰트 최적화
        * IBM Plex Sans 사용 (en-US, ja-JP, ko-KR 지원)
      - RTL 지원 (아랍어 등)
    * 번역 워크플로우
      - 신규 텍스트 자동 추출
      - 번역가 할당 시스템
      - 리뷰어 검수 프로세스
      - 배포 자동화
        * 배포 확정시 대시보드에는 자동 업데이트 적용, 봇에는 점검시에 자동 업데이트 적용
  - 지역화
    * 타임존 처리
    * 날짜/시간 포맷 (ISO 639-1 Code)
    * 통화 표시 (달러(USD), 엔화(JPY), 원화(WON))
  - 문화적 고려사항
    * 아이콘/이미지 현지화
    * 색상 스키마 조정
    * 텍스트 방향 지원

## 3. 봇, 웹사이트 및 대시보드 기능 [ 동시 작업 ]

### 개발자 전용 시스템
- 공지 시스템
  * 개발자가 전송하는 공지 시스템 / 서버점검, 업데이트, 일반 공지 등등
- 모듈
  * 기능을 on/off를 봇에서 할 수 있는 기능
  * /load, /reload, /unload

### 실험실 시스템
- 기능 추가를 위해 일부 기간동안 피드백 및 개선을 위한 실험실 기능
- 실험실은 시작한 날을 기준으로 약 1~3달 동안 테스트와 사용을 할 수 있음
- 관리자가 직접 대시보드에서 실험실 목록에서 끄고 키고가 가능
- 의견 및 피드백은 SOIV Studio Support 디스코드 채널 또는 대시보드에서 작성 후 제출

### Premium [ 유료 서비스 ]
- Premium에 관하여
  * Premium은 제한되어 있는 기능들을 원활하게 사용과 잠겨있는 기능들을 사용하기 위해 존제하는 유료 서비스입니다.
  * 결제 방식은 매월, 매년, 평생을 전부 지원하며 일부 기능은 평생 결제를 지원하지 않습니다.
  * 플레티넘 1개 결제시 최대 서버 2~3개의 서버에서 사용이 가능하며 서버 선택은 니트로 부스터처럼 선택 및 변경이 가능합니다.
    - 서버 변경은 매달 각 1회가 최대입니다. / 디스코드 니트로 부스터와 같은 방식
  * Premium 결제 등급은 다음과 같이 선택하여 사용이 가능합니다.
    - default Premium
      * 가장 기본적인 봇 이름과 프로필 이미지 변경, 제한되지 않은 기능 사용이 들어있는 페키지 입니다.
      * 기본 바탕이 되는 페키지입니다, 매월, 매년, 평생 결제를 전부 지원합니다.
    - default Premium (AI+)
      * default Premium에서 제한되지 않은 AI 시스템이 포함된 페키지입니다.
      * AI system으로 인해 추가금이 발생할 수 있습니다.
      * 상황에 따라 평생 결제가 지원되지 않을 수 있습니다.
    - Premium (AI+)
      * 봇 이름과 프로필 이미지 변경, 제한되지 않은 AI 시스템만 포함된 페키지입니다.
      * AI system으로 인해 추가금이 발생할 수 있습니다.
      * 상황에 따라 평생 결제가 지원되지 않을 수 있습니다.
    - Premium Custom for AI+
      * default Premium (AI+) 및 Custom branded bots가 포함된 페키지입니다.
      * 이 페키지는 평생 결제가 불가능합니다.
- 결제 시스템은 토스페이먼츠를 사용
  * 국내 결제, 해외 결제 전부 토스페이먼츠를 사용
    - 상황에 따라 일부 다른 결제 방식도 사용될 예정
  * 해외 결제는 토스페이먼츠를 사용하되 페이팔 연동하여 사용 가능
  * [토스페이먼츠(Tosspayments)](https://developers.tosspayments.com/)
- Premium 기본 포함된 내용
  * 봇 이름 변경
  * 봇 프로필 이미지 변경
  * 제한되지 않은 기능 사용
    - 커스텀 명령어
    - 채널 시스템
    - 양식 시스템
    - 추첨/투표 시스템
    - Social Notifications
    - Music
    - Translate
    - 게임 내전/대회
  * 제한되지 않은 AI system
    - default AI system
    - AI chat system
- Premium 선텍적 내용
  * Custom branded bots (추가금 발생/별도 결제 가능)

### 제휴(coalition)
제휴 관련 연락은 개발자의 연락처로 문의를 남기면 개발자가 검토 후 계약을 하는 방식
- 제휴에 포함되는 기본적인 리스트
  * 기본적인 디스코드 봇에 대한 모든 기능들
  * Premium (Premium Custom for AI+)
  * 가장 우선 순위 지원
  * 안정적인 릴리즈 버전과 원활한 라이브 서비스

## 4. 추가 고려사항

### 보안 고려사항
- HTTPS 필수 적용
- API 엔드포인트 보안
  * Rate Limiting 정책 구현 (IP 기반, 유저 기반)
  * API 키 관리 및 만료 정책
  * 요청 검증 미들웨어 구현
- 토큰 관리
  * OAuth2 토큰 암호화 저장
  * 토큰 자동 갱신 시스템
  * 세션 관리 및 만료 정책
- 권한 관리
  * RBAC(Role-Based Access Control) 구현
  * 권한 상속 시스템
  * 권한 감사 로그
- DDoS 방어 (Cloudflare 활용)
- 데이터 암호화
  * 중요 데이터 AES-256 암호화
  * 키 순환 정책
  * 암호화 키 관리 시스템

### 성능 최적화
- 이미지 최적화
- 캐싱 전략
- CDN 활용
- 데이터베이스 인덱싱
- 로드 밸런싱 고려

### 모니터링 및 로깅
- 서버 상태 모니터링
  * 시스템 메트릭 (CPU, 메모리, 디스크)
  * 네트워크 트래픽 모니터링
  * 서비스 가용성 체크
  * 알림 임계값 설정 및 알림 구성
- 에러 로깅 및 추적
  * 구조화된 로그 포맷 (JSON)
  * 로그 레벨 관리
  * 로그 보관 기간 정책
  * 에러 스택 트레이스 수집
- 사용자 행동 분석
  * 명령어 사용 패턴
  * 기능별 사용량 통계
  * 사용자 세션 분석
  * 실시간 사용자 모니터링
- 성능 메트릭 수집
  * API 응답 시간 측정
  * 데이터베이스 쿼리 성능
  * 캐시 히트율
  * 리소스 사용량 추이
- 모니터링 도구 통합
  * Prometheus/Grafana 대시보드
  * ELK 스택 구성
  * APM 도구 연동
  * 알림 통합 (Slack/Discord)

### 백업 전략
- 데이터베이스 정기 백업
- 설정 파일 백업
- 복구 절차 문서화

### 확장성 고려
- 마이크로서비스 아키텍처 고려
  * 서비스간 통신: gRPC/RabbitMQ 사용
  * 서비스 디스커버리: Consul/etcd 활용
  * API Gateway: Kong/Traefik 구현
  * 서비스 메시: Istio 검토
- 컨테이너화 가능성
  * Docker 컨테이너화
  * Kubernetes 오케스트레이션
  * CI/CD 파이프라인 구성 (Jenkins/GitLab CI)
  * 컨테이너 모니터링 (Prometheus/Grafana)
- 서버리스 구조 검토
  * AWS Lambda/Azure Functions 활용
  * 이벤트 기반 아키텍처 구현
  * 서버리스 데이터베이스 연동
  * 비용 최적화 전략
- 봇 활동량에 따른 서버 샤드 작업화 및 샤드 그룹화(클러스터)
  * Redis Pub/Sub 기반 샤드간 통신
  * 자동 샤드 스케일링 시스템
  * 샤드 상태 모니터링
  * 샤드간 데이터 동기화 전략
- Custom branded bots에 대한 별도 서버 준비 작업 및 대응
  * 전용 인프라 구성
  * 리소스 격리
  * 커스텀 도메인 지원
  * 전용 모니터링 시스템